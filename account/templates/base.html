{% load static %}
<!DOCTYPE html>
<html>
<head>
	<title>{% block title %}{% endblock %}</title>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
	      rel="stylesheet"
	      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
	<link href="{% static "css/base.css" %}" rel="stylesheet">
	<script src="https://unpkg.com/htmx.org@2.0.2"></script>
</head>
<body>
<div id="header">
	<span class="logo">Your personal accountant</span>

	{% if request.user.is_authenticated %}
		<ul class="menu">
			<li {% if section == "dashboard" %}class="selected"{% endif %}>
				<a href="{% url "dashboard" %}">My dashboard</a>
				<a href="{% url "add_transaction" %}">Transactions</a>
				<a href="{% url "settings" %}">Settings</a>
			</li>

		</ul>
	{% endif %}
	<span class="user">
     {% if request.user.is_authenticated %}
	     Hello, {{ request.user.email|default:request.user.email }}
	     <form method="post" action="{% url 'logout' %}">
           {% csrf_token %}
           <button type="submit">Logout</button>
       </form>
     {% else %}
	     <a href="{% url "login" %}">Log-in</a>
	     <a href="{% url "register" %}">Sign-up</a>
     {% endif %}
   </span>
</div>

<div id="content">
	{% block content %}
	{% endblock %}
</div>

<script>
	document.body.addEventListener('htmx:configRequest', (event) => {
		event.detail.headers['X-CSRFToken'] = '{{ csrf_token }}';
	})
</script>
</body>
</html>