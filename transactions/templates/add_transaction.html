{% extends 'base.html' %}
{% load static %}

{% block title %}Add Transaction{% endblock %}

{% block content %}
    <h1>Add Transaction</h1>

    <div class="transaction-page">
        <div>
            <button class="transaction-btn" data-type="expense">Expense</button>
            <button class="transaction-btn" data-type="income">Income</button>
        </div>



        <form method="post" id="transaction-form">
        <input type="hidden" id="transaction_type" name="transaction_type" value="expense">
            {% csrf_token %}

            <!-- Список категорий -->
            <select id="category-select" name="category" class="select2"
                    style="width: 100%;">
                <option value="">Выберите категорию</option>
                {% for category in categories %}
                    <option value="{{ category.id }}">{{ category.name }}</option>
                {% endfor %}
            </select>

            <!-- Список подкатегорий -->
            <div id="subcategory-container" style="margin-top: 10px;">
                <select id="subcategory-select" name="subcategory" class="select2" style="width: 100%;">
                    <option value="">Выберите подкатегорию</option>
                    <!-- Подкатегории будут динамически загружаться через JS -->
                </select>
            </div>

            <!-- Поля для ввода Amount, Quantity и Description -->
            <div id="transaction-fields" style="margin-top: 10px;">
                {{ form.as_p }}
            </div>

            <button class="submit" type="submit" style="margin-top: 10px;">Submit</button>
        </form>
    </div>

    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>
    <script src="{% static 'js/transaction.js' %}"></script>
    <script>
        $(document).ready(function() {
            $('.select2').select2({
                width: '100%', // Задаем ширину
                placeholder: 'Выберите',
                allowClear: true
            });
        });
    </script>
{% endblock %}
