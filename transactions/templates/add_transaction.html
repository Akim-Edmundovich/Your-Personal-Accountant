{% extends 'base.html' %}
{% load static %}

{% block title %}Add Transaction{% endblock %}

{% block content %}
	<h1>Add Transaction</h1>

	<div class="transaction-page">
		<div>
			<button class="transaction-btn" data-type="expense">Expense</button>
			<button class="transaction-btn" data-type="income">Income</button>
		</div>

		<form method="post" id="transaction-form">
			<input type="hidden" id="transaction_type" name="transaction_type" value="expense">
			{% csrf_token %}

			<!-- Список категорий -->
			<select id="category-select" name="category"
			        class="select2" style="width: 100%;"></select>

			<div class="error">
				{{ form.category.errors }}
			</div>

			<input type="hidden" id="category_id" name="category_id" value="">

			<!-- Список подкатегорий -->
			<div id="subcategory-container" style="margin-top: 10px;">
				<select id="subcategory-select" name="subcategory"
				        class="select2" style="width: 100%;"></select>
			</div>
			<input type="hidden" id="subcategory" name="subcategory" value="">

			<div id="transaction-fields" style="margin-top: 10px;">
				<input type="number" id="amount-input" name="amount">
			</div>

			<button class="submit" type="submit" style="margin-top: 10px;">
				Submit
			</button>
		</form>
	</div>

	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>
	<script src="{% static 'js/transaction.js' %}"></script>
	<script>
		$(document).ready(function () {
			$('.select2').select2({
				width: '50%', // Задаем ширину
				placeholder: 'Выберите',
				allowClear: true
			});
			$('#category-select').select2({
				width: '50%',
				placeholder: 'Category',
				allowClear: true
			})
			$('#subcategory-select').select2({
				width: '50%',
				placeholder: 'Subcategory',
				allowClear: true
			})
		});
	</script>
{% endblock %}
